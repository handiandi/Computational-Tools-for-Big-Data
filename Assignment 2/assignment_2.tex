\documentclass{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc} 
\usepackage{amsmath,amssymb,graphicx}
\usepackage{cleveref}


% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal
\DeclareUnicodeCharacter{00D6}{Ö}
\DeclareUnicodeCharacter{00DC}{Ü}
\DeclareUnicodeCharacter{00E4}{ä}
\DeclareUnicodeCharacter{00E4}{ä}

% Custom colors
\usepackage{color}

\definecolor{output_background}{rgb}{0.4, 0.4, 0.4}
\definecolor{gray}{rgb}{0.5, 0.5, 0.5}
\definecolor{purple}{rgb}{0.6, 0.1, 0.9}
\usepackage{listings}

% Python style for highlighting
\newcommand\pythonstyle{\lstset{
language=python,
breaklines=true,
basicstyle=\ttfamily\small,
otherkeywords={1, 2, 3, 4, 5, 6, 7, 8 ,9 , 0, -, =, +, [, ], (, ), \{, \}, :, *, !},             % Add keywords here
keywordstyle=\color{blue},
emph={class, pass, in, for, while, if, is, elif, else, not, and, or, OR
    def, print, exec, break, continue, return},
emphstyle=\color{black}\bfseries,
emph={[2]True, False, None, self},
emphstyle=[2]\color{purple},
emph={[3]from, import, as},
emphstyle=[3]\color{blue},
stringstyle=\color{red},
frame=tb,
showstringspaces=false,
morecomment=[s]{"""}{"""},
commentstyle=\color{gray},
rulesepcolor=\color{blue},
title=\lstname
}}

% Python style for output highlighting
\newcommand\pythonoutputstyle{\lstset{
backgroundcolor=\color{output_background},
basicstyle=\ttm\small\color{white},
showstringspaces=false,
inputencoding=utf8,
extendedchars=true,
literate=%
    {á}{{\'a}}1
    {č}{{\v{c}}}1
    {ď}{{\v{d}}}1
    {é}{{\'e}}1
    {ě}{{\v{e}}}1
    {í}{{\'i}}1
    {ň}{{\v{n}}}1
    {ó}{{\'o}}1
    {ř}{{\v{r}}}1
    {š}{{\v{s}}}1
    {ť}{{\v{t}}}1
    {ú}{{\'u}}1
    {ů}{{\r{u}}}1
    {ý}{{\'y}}1
    {ž}{{\v{z}}}1
    {Á}{{\'A}}1
    {Č}{{\v{C}}}1
    {Ď}{{\v{D}}}1
    {É}{{\'E}}1
    {Ě}{{\v{E}}}1
    {Í}{{\'I}}1
    {Ň}{{\v{N}}}1
    {Ó}{{\'O}}1
    {Ř}{{\v{R}}}1
    {Š}{{\v{S}}}1
    {Ť}{{\v{T}}}1
    {Ú}{{\'U}}1
    {Ů}{{\r{U}}}1
    {Ý}{{\'Y}}1
    {Ž}{{\v{Z}}}1
    {Ö}{{\"{O}}}1
    {ö}{{\"{o}}}1
    {Ü}{{\"{U}}}1
    {ü}{{\"{u}}}1   
    {ß}{{\ss}}1
    {ä}{{\"{a}}}1
    {é}{{\'{e}}}1
    {ô}{{\^{o}}}1
    {â}{{\^{a}}}1
    {è}{{\`{e}}}1
}}


\lstnewenvironment{pythonOutput}[1][]
{
\pythonoutputstyle
\lstset{#1}
}
{}

% Python for inline
\newcommand\pythonoutput[1]{{\pythonoutputstyle\lstinline!#1!}}


% Python for external files
\newcommand\pythonexternal[2][]{{
\pythonstyle
\lstinputlisting[#1]{#2}}}

\title{Assignment 2\\02807 Computational Tools for Big Data}
\author{S \& A}
\date{26th October 2015}
\usepackage[cm]{fullpage}
\begin{document}

\maketitle
\newpage
%-------------- Week 5 ---------------------
\section{Exercise 5.1}
\textbf{Short recap of the exercise}\\
\textit{Establish connection to the Northwind database in Python with Sqlite (use the sqlite3 module) and MongoDB. Document the connection by making some simple queries.}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item We import the needed modules for Sqlite and MongoDB
  \item Then we create two queries for Sqlite and print the results
  \item Last, we do the same with MongoDB: create two queries and print the results\\
\end{enumerate}

\textbf{Code}\\
\pythonexternal{"../Lesson 5/exercise5-1.py"}
~\\
\textbf{Output}
\begin{pythonOutput}
sqlite query:
customers:
 [('ALFKI', 'Alfreds Futterkiste', 'Maria Anders', 'Sales Representative', 'Obere Str. 57', 
 'Berlin', None, '12209', 'Germany', '030-0074321', '030-0076545')]
Orders: 
 (10643, 'ALFKI', 6, '1997-08-25 00:00:00.000', '1997-09-22 00:00:00.000', 
 '1997-09-02 00:00:00.000', 1, 29.46, 'Alfreds Futterkiste', 'Obere Str. 57', 
 'Berlin', None, '12209', 'Germany')



mongodb query:
customers:
 {'CustomerID': 'ALFKI', 'ContactTitle': 'Sales Representative', 
 'CompanyName': 'Alfreds Futterkiste', 'City': 'Berlin', 'Fax': '030-0076545', 
 'Region': 'NULL', 'ContactName': 'Maria Anders', 'Phone': '030-0074321', 
 '_id': ObjectId('56139e109348cd1026b33f5b'), 'Address': 'Obere Str. 57', 
 'Country': 'Germany', 'PostalCode': 12209}

Orders: 
 {'CustomerID': 'ALFKI', 'EmployeeID': 6, 'ShipName': 'Alfreds Futterkiste', 
 'OrderID': 10643, 'ShippedDate': '1997-09-02 00:00:00.000', 'Freight': 29.46, 
 'ShipVia': 1, 'ShipCity': 'Berlin', 'ShipAddress': 'Obere Str. 57', 
 '_id': ObjectId('56139e119348cd1026b35561'), 'ShipCountry': 'Germany', 
 'OrderDate': '1997-08-25 00:00:00.000', 'ShipRegion': 'NULL', 'ShipPostalCode': 12209, 
 'RequiredDate': '1997-09-22 00:00:00.000'}

\end{pythonOutput}

~\\
\textbf{Explanation of code and discussion}\\
We first try connecting and querying the sqlite database by querying all customers as well as orders for a specific customer. We then print out the result. 
We do it all in a try-except, so it can handle errors like "database not found" or "table not found" without  currupting the db. This is usually only nessecary when insert or updating data. We have it by principle. \\
\\*
We can see by the output, that our queries works, since it gets some reasonable results. 


\section{Exercise 5.2}
\textbf{Short recap of the exercise}\\
\textit{Query for, and return, all orders made by ALFKI and the products they contain}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
\pythonexternal{"../Lesson 5/exercise5-2.py"}
~\\
\textbf{Output}
\begin{pythonOutput}
sqlite part:
('ALFKI', 10643, 'Rössle Sauerkraut')
('ALFKI', 10643, 'Chartreuse verte')
('ALFKI', 10643, 'Spegesild')
('ALFKI', 10692, 'Vegie-spread')
('ALFKI', 10702, 'Aniseed Syrup')
('ALFKI', 10702, 'Lakkalikööri')
('ALFKI', 10835, 'Raclette Courdavault')
('ALFKI', 10835, 'Original Frankfurter grüne Soße')
('ALFKI', 10952, "Grandma's Boysenberry Spread")
('ALFKI', 10952, 'Rössle Sauerkraut')
('ALFKI', 11011, 'Escargots de Bourgogne')
('ALFKI', 11011, 'Flotemysost')

MongoDB part:
ALFKI 10643 Rössle Sauerkraut
ALFKI 10643 Chartreuse verte
ALFKI 10643 Spegesild
ALFKI 10692 Vegie-spread
ALFKI 10702 Aniseed Syrup
ALFKI 10702 Lakkalikööri
ALFKI 10835 Raclette Courdavault
ALFKI 10835 Original Frankfurter grüne Soße
ALFKI 10952 Grandma's Boysenberry Spread
ALFKI 10952 Rössle Sauerkraut
ALFKI 11011 Escargots de Bourgogne
ALFKI 11011 Flotemysost
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
\underline{For sqlite part:}~\\
First we need to join 3 tables which are of importance to us: Orders which contain single orders for a Customer,
Order Details which ties an Order together with a Product and also contains quantity, price and discount, lastly we need the Products table to get the Product Name.
So we join Orders and Order Details on OrderID, and Order Details and Products on ProductID, and then we only need the orders with ALFKI as customer. We then specify the attributes which are interesting, for example CustomerID to ensure ALFKI is Customer, the OrderID and the different Product Names in the order.

~\\
\underline{For MongoDB part:}~\\
MongoDB version is sort of the same as the sqlite one, instead of joins we just iterate over queries of each collection with our chosen criteria 

\section{Exercise 5.3}
\textbf{Short recap of the exercise}\\
\textit{Get all orders (with products) made by ALFKI that contain at least 2 product types}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we create the sqlite part, with a single query which contains a sub-select. We prints the result 
  \item Then we create the MongoDB part with loops, and printing the results. 
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Sqlite part:
('ALFKI', 10643, 'Rössle Sauerkraut')
('ALFKI', 10643, 'Chartreuse verte')
('ALFKI', 10643, 'Spegesild')
('ALFKI', 10702, 'Aniseed Syrup')
('ALFKI', 10702, 'Lakkalikööri')
('ALFKI', 10835, 'Raclette Courdavault')
('ALFKI', 10835, 'Original Frankfurter grüne Soße')
('ALFKI', 10952, "Grandma's Boysenberry Spread")
('ALFKI', 10952, 'Rössle Sauerkraut')
('ALFKI', 11011, 'Escargots de Bourgogne')
('ALFKI', 11011, 'Flotemysost')

MongoDB part:
ALFKI 10643 Rössle Sauerkraut
ALFKI 10643 Chartreuse verte
ALFKI 10643 Spegesild
ALFKI 10702 Aniseed Syrup
ALFKI 10702 Lakkalikööri
ALFKI 10835 Raclette Courdavault
ALFKI 10835 Original Frankfurter grüne Soße
ALFKI 10952 Grandma's Boysenberry Spread
ALFKI 10952 Rössle Sauerkraut
ALFKI 11011 Escargots de Bourgogne
ALFKI 11011 Flotemysost

\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
\underline{For sqlite part:}~\\
The solution looks very similar to the latter, except for the sub/"inner" select statement. This select retrieve ALL the order ID from Orders, which have a count greater than 1 and CustomerID is 'ALFKI'. ~\\
The outer-select, select then CustomerID, OrderID and ProductName based on those OrderID's which the inner-selects returns. 

~\\
\underline{For MongoDB part:}~\\
The solution looks very similar to the latter, except for the if-statement where the count are greater than 1. 

~\\
For verifying the result, we can see that the 10692 from the previous exercise are NOT in this solution. 10692 has only 1 products name which we can see in the previous exercise. 

\section{Exercise 5.4}
\textbf{Short recap of the exercise}\\
\textit{Determine how many and who ordered “Uncle Bob’s Organic Dried Pears” (productID 7).}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
\pythonexternal{"../Lesson 5/exercise5-4.py"}
\textbf{Output}
\begin{pythonOutput}
Sqlite: 20 distinct people ordered Uncle Bob's Organic Dried Pears
 They are:
(2, 'Laurence Lebihan')
(1, 'Elizabeth Lincoln')
(2, 'Victoria Ashworth')
(2, 'Ann Devon')
(1, 'Roland Mendel')
(1, 'Martine Rancé')
(1, 'Maria Larsson')
(1, 'André Fonseca')
(1, 'Daniel Tonini')
(1, 'Carlos González')
(1, 'Yvonne Moncada')
(2, 'Henriette Pfalzheim')
(2, 'Horst Kloss')
(3, 'Paula Wilson')
(2, 'Maurizio Moroni')
(1, 'Jonas Bergulfsen')
(1, 'Jose Pavarotti')
(1, 'Art Braunschweiger')
(1, 'Palle Ibsen')
(2, 'Mary Saveley')

MongoDB: 20 distinct people ordered Uncle Bobo's Organic Dried Pears
 They are:
(2, 'Laurence Lebihan')
(2, 'Ann Devon')
(1, 'Maria Larsson')
(2, 'Victoria Ashworth')
(2, 'Henriette Pfalzheim')
(1, 'Elizabeth Lincoln')
(2, 'Mary Saveley')
(1, 'Carlos González')
(1, 'Yvonne Moncada')
(1, 'Jonas Bergulfsen')
(1, 'Daniel Tonini')
(1, 'Jose Pavarotti')
(1, 'Palle Ibsen')
(2, 'Horst Kloss')
(1, 'André Fonseca')
(1, 'Art Braunschweiger')
(2, 'Maurizio Moroni')
(1, 'Martine Rancé')
(1, 'Roland Mendel')
(3, 'Paula Wilson')

\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
\underline{For sqlite part:}~\\
We can select count of customerID on orders to get how many times each customer ordered a certain product and their ContactName
We join customers on orders, orders on order details and order details on products
We filter by ProductID which needs to be 7 and group by CustomerID to get distinct Customers

~\\
\underline{For MongoDB part:}~\\
In the MongoDB version we start with order details which contain the Pears Product ID
We iterate over their respective orders and the orders respective customers
We can then build a list of distinct customers which have ordered the Pears and also how many times they have ordered them 


\section{Exercise 5.5}
\textbf{Short recap of the exercise}\\
\textit{How many different and which products have been ordered by customers who have also ordered “Uncle Bob’s Organic Dried Pears”?}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
\pythonexternal{"../Lesson 5/exercise5-5.py"}
\textbf{Output}
\begin{pythonOutput}
Sqlite: 76 different products have been purchased by Uncle Bob's Organic Dried Pears Customers
These are:
Gustaf's Knäckebröd
Ravioli Angelo
Louisiana Fiery Hot Pepper Sauce
Chang
Chef Anton's Gumbo Mix
Mascarpone Fabioli
Jack's New England Clam Chowder
Tarte au sucre
Outback Lager
Uncle Bob's Organic Dried Pears
Gnocchi di nonna Alice
Pavlova
Guaraná Fantástica
Nord-Ost Matjeshering
Longlife Tofu
Geitost
Sir Rodney's Marmalade
Gorgonzola Telino
Mozzarella di Giovanni
Ikura
Boston Crab Meat
Lakkalikööri
Genen Shouyu
Teatime Chocolate Biscuits
Camembert Pierrot
Chai
Perth Pasties
Steeleye Stout
Tourtière
Scottish Longbreads
Aniseed Syrup
Wimmers gute Semmelknödel
Alice Mutton
Ipoh Coffee
Rhönbräu Klosterbier
Queso Cabrales
Gudbrandsdalsost
Inlagd Sill
Escargots de Bourgogne
Spegesild
Raclette Courdavault
Vegie-spread
Côte de Blaye
Gumbär Gummibärchen
Filo Mix
Carnarvon Tigers
Northwoods Cranberry Sauce
Singaporean Hokkien Fried Mee
Gula Malacca
Chartreuse verte
NuNuCa Nuß-Nougat-Creme
Manjimup Dried Apples
Flotemysost
Sasquatch Ale
Original Frankfurter grüne Soße
Sir Rodney's Scones
Rössle Sauerkraut
Thüringer Rostbratwurst
Pâté chinois
Tofu
Maxilaku
Tunnbröd
Chocolade
Gravad lax
Zaanse koeken
Sirop d'érable
Louisiana Hot Spiced Okra
Rogede sild
Valkoinen suklaa
Konbu
Chef Anton's Cajun Seasoning
Mishi Kobe Niku
Schoggi Schokolade
Röd Kaviar
Queso Manchego La Pastora
Grandma's Boysenberry Spread


MongoDB: 76 different products have been purchased by Uncle Bob's Organic Dried Pears Customers
These are:
Outback Lager
Mishi Kobe Niku
Steeleye Stout
Zaanse koeken
Konbu
Tofu
Teatime Chocolate Biscuits
Singaporean Hokkien Fried Mee
Jack's New England Clam Chowder
Raclette Courdavault
Filo Mix
Ravioli Angelo
Boston Crab Meat
Côte de Blaye
Thüringer Rostbratwurst
Perth Pasties
Rössle Sauerkraut
Gnocchi di nonna Alice
Rhönbräu Klosterbier
Pâté chinois
Lakkalikööri
Uncle Bob's Organic Dried Pears
Rogede sild
Longlife Tofu
Genen Shouyu
Alice Mutton
Geitost
Guaraná Fantástica
Tourtière
Sasquatch Ale
Inlagd Sill
Schoggi Schokolade
Sir Rodney's Scones
Maxilaku
Valkoinen suklaa
Mascarpone Fabioli
Gorgonzola Telino
Mozzarella di Giovanni
Ikura
Chang
Vegie-spread
Camembert Pierrot
Sirop d'érable
Louisiana Fiery Hot Pepper Sauce
Wimmers gute Semmelknödel
Chocolade
Original Frankfurter grüne Soße
Manjimup Dried Apples
Gula Malacca
Queso Cabrales
Chartreuse verte
Gumbär Gummibärchen
Carnarvon Tigers
Flotemysost
Sir Rodney's Marmalade
Gravad lax
Northwoods Cranberry Sauce
Scottish Longbreads
Chef Anton's Cajun Seasoning
Chai
Escargots de Bourgogne
Queso Manchego La Pastora
Chef Anton's Gumbo Mix
NuNuCa Nuß-Nougat-Creme
Tunnbröd
Gudbrandsdalsost
Spegesild
Tarte au sucre
Röd Kaviar
Grandma's Boysenberry Spread
Ipoh Coffee
Nord-Ost Matjeshering
Aniseed Syrup
Louisiana Hot Spiced Okra
Pavlova
Gustaf's Knäckebröd
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
\underline{For sqlite part:}~\\
We first find the distinct customer ids of the people who've purchased Pears using the DISTINCT and procede just like in the former exercise.
Next we find all the orders orders of the customers by joining with orders, then order details joining with order details and products joining with products.
We then find the distinct products by joining the beforementioned tables again and
build a string for use with the IN keyword specifying all the customer id's whose products we are interested in.

~\\
\underline{For MongoDB part:}~\\
We first find the customers who purchased pears like in the last exercise
Next we find all the Orders and Order Details and their corresponding Products
We can then convert the list to a set to find the unique products and how many there is






\section{Exercise 5.6}
\textbf{Short recap of the exercise}\\
\textit{Description text}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
\underline{For sqlite part:}~\\



\section{Exercise 5.7}
\textbf{Short recap of the exercise}\\
\textit{Description text}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
Bla bla bla


%-------------- Week 6 ---------------------
\section{Exercise 6.1}
\textbf{Short recap of the exercise}\\
\textit{Description text}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
Bla bla bla

\section{Exercise 6.2}
\textbf{Short recap of the exercise}\\
\textit{Description text}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
Bla bla bla

\section{Exercise 6.3}
\textbf{Short recap of the exercise}\\
\textit{Description text}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
Bla bla bla
\section{Exercise 6.4}
\textbf{Short recap of the exercise}\\
\textit{Description text}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
Bla bla bla
\section{Exercise 6.5}
\textbf{Short recap of the exercise}\\
\textit{Description text}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
Bla bla bla
\section{Exercise 6.6}
\textbf{Short recap of the exercise}\\
\textit{Description text}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
Bla bla bla
\section{Exercise 6.7}
\textbf{Short recap of the exercise}\\
\textit{Description text}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
%\pythonexternal{"../Lesson 2/exercise2-2.py"}\\
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
Bla bla bla


%-------------- Week 7 ---------------------
\section{Exercise 7.1}
\textbf{Short recap of the exercise}\\
\textit{Implement a Bloom Filter as a Python class. The class should have an add method which adds a string to the filter, and a lookup method which determines if a string is “in the filter”.}\\

\textbf{Overview over code flow}\\
For creating the bloom filter class we used the algorithm found at Wikipedia\footnote{wikilink}.\\
We used a number of bits (m) of 1 million for the bit array, and we used an estimated number of distinct entries (n) of 235887 which are the number of entries in the dictionary file.
For finding the optimal number of hash functions we used the formula $\frac{m}{n} \cdot ln(2)$ which in our case gives us $2.938$ which we round up to next integer $3$.\\
For finding each word in our texts we first needed to clean them. We converted the text to lower-case and split on the regex `\textbackslash W+' which gives us all words. We found we had to process the words even further as plural forms of words were present in the shakespeare text which was not the case in the dictionary thus yielding an error. To circumvent this we used a stemmer (Snowball Stemmer from the nltk library) to reduce the words to their word stem in both the dictionary and shakespeare text.\\
We defined two functions, one utilizing our BloomFilter class and one using the naive approach, this way we can benchmark them using the timeit module.\\

\textbf{Code}\\
\pythonexternal{"../Lesson 7/bloom_filter.py"}
\textbf{Output}
\begin{pythonOutput}
5.115084372999263
85.1088753360018
132 words not in dictionary (in non bloom filter set) and 117 words not in dictionary (in bloom filter set), thus a false positive rate of 0.11363636363636365
words not in dictionary but reported to be:
licenc
ovid
seest
tis
ild
baser
speakest
diest
safest
truest
madmen
began
vii
drave
favour
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
From the output we can see that using a bloom filter takes 5.115 seconds to add every dictionary word and do every lookup in the shakespeare text, and by doing it the naive way it takes 85.108 seconds, thus a speedup of ~16.638x, however we can also see the `penalty' of using a bloom filter as it reports 15 words as false positives (being in the dictionary when they are not).\\ Looking at the output of words we could probably reduce the number of words not in the dictionary even further as some of those words does exist in the dictionary just in another form, like safest and safe.

\section{Exercise 7.2}
\textbf{Short recap of the exercise}\\
\textit{Implement the Flajolet-Martin algorithm to determine the number of distinct words in this Shakespeare file.}\\

\textbf{Overview over code flow}\\

\begin{enumerate}
  \item First we fetch the \ldots
  \item Then we\ldots
  \item We output \ldots\\
\end{enumerate}

\textbf{Code}\\
\pythonexternal{"../Lesson 7/flajolet_martin.py"}
\textbf{Output}
\begin{pythonOutput}
Output
\end{pythonOutput}
\textbf{Explanation of code and discussion}\\
Bla bla bla

\end{document}
